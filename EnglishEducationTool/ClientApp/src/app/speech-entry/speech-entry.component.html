<mat-drawer-container class="drawer-container">

  <mat-drawer mode="side" opened disableClose position="end">
    <mat-accordion multi="true">
      <mat-expansion-panel expanded>
        <mat-expansion-panel-header>
          <mat-panel-title>
            Check Spelling
          </mat-panel-title>
          <mat-panel-description>
            <div *ngIf="dataSource[0].token != '-'; else elseBlockNum">
              [{{ dataSource.length }}]
            </div>
            <ng-template #elseBlockNum>No Suggestions</ng-template>
          </mat-panel-description>
        </mat-expansion-panel-header>
        <div class="spellcheck-container">
          <p>Entry: {{ wordToProof }}</p>
          <ng-template #elseBlockDescrip></ng-template>
          <table mat-table [dataSource]="dataSource" class="mat-elevation-z1" *ngIf="dataSource[0].token != ''">
            <!--- Note that these columns can be defined in any order.
          The actual rendered columns are set as a property on the row definition" -->
            <!-- Word Column -->
            <ng-container matColumnDef="word">
              <th mat-header-cell *matHeaderCellDef> Word </th>
              <td mat-cell *matCellDef="let element"> {{element.token}} </td>
            </ng-container>
            <!-- Suggestions Column -->
            <ng-container matColumnDef="suggestions">
              <th mat-header-cell *matHeaderCellDef>Suggestions</th>
              <td mat-cell *matCellDef="let element">
                <div>
                  <ng-container *ngFor="let item of element.suggestions">
                    <div>
                      <span>
                        {{ item.suggestionSuggestion }}
                      </span>
                    </div>
                  </ng-container>
                </div>
              </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
        </div>
      </mat-expansion-panel>

      <div class="definition-container">
        <mat-expansion-panel expanded>
          <mat-expansion-panel-header>
            <mat-panel-title>
              Dictionary
            </mat-panel-title>

            <mat-panel-description (click)="$event.stopPropagation();">
              <mat-form-field appearance="fill">
                <mat-label>Language</mat-label>
                <mat-select matNativeControl
                            [formControl]="languageFormControl"
                            (selectionChange)="translate()">
                  <mat-option value="en">English</mat-option>
                  <mat-option value="af">Afrikaans</mat-option>
                  <mat-option value="sq">Albanian</mat-option>
                  <mat-option value="am">Amharic</mat-option>
                  <mat-option value="ar">Arabic</mat-option>
                  <mat-option value="hy">Armenian</mat-option>
                  <mat-option value="as">Assamese</mat-option>
                  <mat-option value="az">Azerbaijani</mat-option>
                  <mat-option value="bn">Bangla</mat-option>
                  <mat-option value="bs">Bosnian (Latin)</mat-option>
                  <mat-option value="bg">Bulgarian</mat-option>
                  <mat-option value="yue">Cantonese (Traditional)</mat-option>
                  <mat-option value="ca">Catalan</mat-option>
                  <mat-option value="zh-Hans">Chinese Simplified</mat-option>
                  <mat-option value="zh-Hant">Chinese Traditional</mat-option>
                  <mat-option value="hr">Croatian</mat-option>
                  <mat-option value="cs">Czech</mat-option>
                  <mat-option value="da">Danish</mat-option>
                  <mat-option value="prs">Dari</mat-option>
                  <mat-option value="nl">Dutch</mat-option>
                  <mat-option value="en">English</mat-option>
                  <mat-option value="et">Estonian</mat-option>
                  <mat-option value="fj">Fijian</mat-option>
                  <mat-option value="fil">Filipino</mat-option>
                  <mat-option value="fi">Finnish</mat-option>
                  <mat-option value="fr">French</mat-option>
                  <mat-option value="fr-ca">French (Canada)</mat-option>
                  <mat-option value="de">German</mat-option>
                  <mat-option value="el">Greek</mat-option>
                  <mat-option value="gu">Gujarati</mat-option>
                  <mat-option value="ht">Haitian Creole</mat-option>
                  <mat-option value="he">Hebrew</mat-option>
                  <mat-option value="hi">Hindi</mat-option>
                  <mat-option value="mww">Hmong Daw</mat-option>
                  <mat-option value="hu">Hungarian</mat-option>
                  <mat-option value="is">Icelandic</mat-option>
                  <mat-option value="id">Indonesian</mat-option>
                  <mat-option value="iu">Inuktitut</mat-option>
                  <mat-option value="ga">Irish</mat-option>
                  <mat-option value="it">Italian</mat-option>
                  <mat-option value="ja">Japanese</mat-option>
                  <mat-option value="kn">Kannada</mat-option>
                  <mat-option value="kk">Kazakh</mat-option>
                  <mat-option value="km">Khmer</mat-option>
                  <mat-option value="tlh-Latn">Klingon</mat-option>
                  <mat-option value="tlh-Piqd">Klingon (plqaD)</mat-option>
                  <mat-option value="ko">Korean</mat-option>
                  <mat-option value="ku">Kurdish (Central)</mat-option>
                  <mat-option value="kmr">Kurdish (Northern)</mat-option>
                  <mat-option value="lo">Lao</mat-option>
                  <mat-option value="lv">Latvian</mat-option>
                  <mat-option value="lt">Lithuanian</mat-option>
                  <mat-option value="mg">Malagasy</mat-option>
                  <mat-option value="ms">Malay</mat-option>
                  <mat-option value="ml">Malayalam</mat-option>
                  <mat-option value="mt">Maltese</mat-option>
                  <mat-option value="mi">Maori</mat-option>
                  <mat-option value="mr">Marathi</mat-option>
                  <mat-option value="my">Myanmar</mat-option>
                  <mat-option value="ne">Nepali</mat-option>
                  <mat-option value="nb">Norwegian</mat-option>
                  <mat-option value="or">Odia</mat-option>
                  <mat-option value="ps">Pashto</mat-option>
                  <mat-option value="fa">Persian</mat-option>
                  <mat-option value="pl">Polish</mat-option>
                  <mat-option value="pt">Portuguese (Brazil)</mat-option>
                  <mat-option value="pt-pt">Portuguese (Portugal)</mat-option>
                  <mat-option value="pa">Punjabi</mat-option>
                  <mat-option value="otq">Queretaro Otomi</mat-option>
                  <mat-option value="ro">Romanian</mat-option>
                  <mat-option value="ru">Russian</mat-option>
                  <mat-option value="sm">Samoan</mat-option>
                  <mat-option value="sr-Cyrl">Serbian (Cyrillic)</mat-option>
                  <mat-option value="sr-Latn">Serbian (Latin)</mat-option>
                  <mat-option value="sk">Slovak</mat-option>
                  <mat-option value="sl">Slovenian</mat-option>
                  <mat-option value="es">Spanish</mat-option>
                  <mat-option value="sw">Swahili</mat-option>
                  <mat-option value="sv">Swedish</mat-option>
                  <mat-option value="ty">Tahitian</mat-option>
                  <mat-option value="ta">Tamil</mat-option>
                  <mat-option value="te">Telugu</mat-option>
                  <mat-option value="th">Thai</mat-option>
                  <mat-option value="ti">Tigrinya</mat-option>
                  <mat-option value="to">Tongan</mat-option>
                  <mat-option value="tr">Turkish</mat-option>
                  <mat-option value="uk">Ukrainian</mat-option>
                  <mat-option value="ur">Urdu</mat-option>
                  <mat-option value="vi">Vietnamese</mat-option>
                  <mat-option value="cy">Welsh</mat-option>
                  <mat-option value="yua">Yucatec Maya</mat-option>
                </mat-select>
              </mat-form-field>
              <button mat-stroked-button
                      color="basic"
                      (click)="switchTranslation()">
                <mat-icon>
                  translate
                </mat-icon>
              </button>
            </mat-panel-description>
          </mat-expansion-panel-header>

          <mat-form-field appearance="outline">
            <mat-label>Search a word</mat-label>
            <input matInput
                   placeholder="Search..."
                   type="text"
                   autocomplete="off"
                   [formControl]="searchFormControl"
                   pattern="[^\s]*">
            <button mat-button
                    matSuffix
                    (click)="getDefinition()">
              <mat-icon>search</mat-icon>
            </button>
          </mat-form-field>

          <div *ngIf="dicObj[0].word != ''">
            <div class="inline-container">
              <button mat-button
                      (click)="playAudio()">
                <mat-icon>volume_up</mat-icon>
              </button>

              <div id="dic-word">
                <h2><strong>{{ dicObj[0].word }}</strong></h2>
                <h4>{{ dicObj[0].phonetics[0].text }}</h4>
              </div>
            </div>

            <ng-container *ngFor="let dicItem of dicObj">
              <div class="description-container"
                   *ngFor="let dicMeaning of dicItem.meanings">
                <h4><i>{{ dicMeaning.partOfSpeech }}</i></h4>

                <ng-container *ngFor="let def of dicMeaning.definitions">
                  <p style="margin-bottom: 0;"> {{ def.definition }}</p>
                  <p style="color: gray;" *ngIf="def.example != null"> "{{ def.example }}" </p>
                </ng-container>
              </div>
            </ng-container>
          </div>

        </mat-expansion-panel>
      </div>
    </mat-accordion>
    <button (click)="translate()">FOO TRANSLATE</button>
    <!--<button (click)="synth(fooAudioBlob)">FOO AUDIO</button>-->
  </mat-drawer>

  <mat-drawer-content>
    <div class="form-container">
      <div id="form-flex-container">
        <div id="conversation-history">

          <mat-list dense id="message-list">
            <!-- Warning Alert -->
            <div class="alert alert-danger alert-dismissible fade show" *ngIf="badwordWarning">
              <strong>Warning!</strong> Please enter a valid input without the use of profanity.
              <button type="button"
                      class="btn-close"
                      data-bs-dismiss="alert"
                      aria-label="Close"
                      (click)="closeWarning()"></button>
            </div>
            <mat-list-item *ngFor="let message of messages">
              <p> {{ message }} </p>
            </mat-list-item>
            <mat-list-item>
              <p #tw></p>
            </mat-list-item>
          </mat-list>
        </div>

        <div id="input-container">
          <div id="input-flex-container">
            <div class="input-button-container">
              <button mat-fab
                      color="accent"
                      (click)="startService()"
                       *ngIf="this.service.isStoppedSpeechRecog">
                <mat-icon>mic</mat-icon>
              </button>
              <button mat-fab
                      color="basic"
                      (click)="stopListening()"
                      *ngIf="!this.service.isStoppedSpeechRecog">
                <mat-icon>stop</mat-icon>
              </button>
            </div>
            <!--<div class="input-button-container" *ngIf="recordBool">
              <button mat-fab
                      color="basic"
                      (click)="stopListening()">
                <mat-icon>stop</mat-icon>
              </button>
            </div>-->

            <mat-form-field id="input-full-width">
              <mat-label>Message</mat-label>
              <textarea type="text"
                        matInput
                        [formControl]="inputFormControl"
                        placeholder="Enter message"
                        autocomplete="off"
                        [errorStateMatcher]="matcher"
                        cdkTextareaAutosize
                        #autosize="cdkTextareaAutosize"
                        cdkAutosizeMinRows="1"
                        (input)="this.service.stop(this.inputFormControl.value)"></textarea>

              <mat-error *ngIf="inputFormControl.hasError('required')">
                Message is empty
              </mat-error>

              <mat-error *ngIf="inputFormControl.hasError('maxlength')">
                Message exceeds 140 characters
              </mat-error>

              <mat-hint>{{ inputFormControl.value.length }}/140</mat-hint>
            </mat-form-field>

            <div class="input-button-container">
              <button mat-fab
                      (click)="spellCheckFunc()"
                      color="basic"
                      [disabled]="!inputFormControl.valid">
                <mat-icon>spellcheck</mat-icon>
              </button>
            </div>

            <div class="input-button-container">
              <button mat-fab
                      color="primary"
                      (click)="sendClick()"
                      [disabled]="!inputFormControl.valid">
                <mat-icon>send</mat-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

  </mat-drawer-content>
</mat-drawer-container>
